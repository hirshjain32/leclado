<!DOCTYPE html>
<html>
<head>
        <title>Geocoding Browser Position Using Javascript's Geolocation API</title>
        <link rel='stylesheet' href='/stylesheets/bootstrap.min.css' style="text/css" />
	    <link rel='stylesheet' href='/stylesheets/geo.css' style = "text/css" />
        <link href='http://fonts.googleapis.com/css?family=Fenix' rel='stylesheet' type='text/css'>

 
        <style type="text/css">
 
                html,
                body {
                        height: 100% ;
                        margin: 0px 0px 0px 0px ;
                        overflow: hidden ;
                        padding: 0px 0px 0px 0px ;
                        width: 100% ;
                        }
 
                #mapContainer {
                        height: 92% ;
                        width: 100% ;
                        z-index: -30;
                        }
 
        </style>
        <!--- Include jQuery and Google Map scripts. -->
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
</head>
<body>
 
 
        <div id="mapContainer">
                <!-- This is where Google map will go. -->
                <div>Hello </div>
        </div>
 
 
        <!---
                Now that we have defined our map container, we should be
                able to immediately load our Google Map.
        -->
        <script type="text/javascript">

                

                // Check to see if this browser supports geolocation.
                if (navigator.geolocation) 
                {
                        
                        array = new Array();
                        // Sets up location marker for the map
                        var locationMarker = null;
 
                        // Gets location of user's browser
                        navigator.geolocation.getCurrentPosition(
                                function( position )
                                {


                                        // Check to see if there is already a location.
                                        if (locationMarker)
                                        {
                                                return;
                                        }
 
                                        // Log that this is the initial position.
                                        console.log( "Initial Position Found" );
 
                                        // Add a marker to the map using the position.
                                        locationMarker = addMarker(
                                                position.coords.latitude,
                                                position.coords.longitude,
                                                "Initial Position"
                                        );

                                        //update the center to current location
                                        var newCenter = new google.maps.LatLng(
                                                position.coords.latitude,
                                                position.coords.longitude
                                        );


                                        
                                        // stores lat and lng on the document to be accessed by the html
                                        document.getElementById("lat").value = position.coords.latitude;
                                        document.getElementById("lng").value = position.coords.longitude;
                                        array.lat = positions.coords.latitude;

                                        console.log(array.lat);
                                },
                                function( error )
                                {
                                        console.log( "Something went wrong: ", error );
                                },
                                
                        );
                } 
                else
                {
                        mapContainer.innerHTML = "Your browser does not support GeoLocation. Get a better one.";
                }
                



        </script>

	<div class="container">

            <form class = "navbar-form" action = "/addlocation" method = "POST">
                <div class = "form-group">
                  <input class = "form-control" name = "name" placeholder = "Location Name" id = "name" type = "text"/>
                  <input class = "submission-control" name = "description" placeholder = "Description" id = "description" type = "text"/>
                <input type = "hidden" name = "lat" id = "lat" value = '' />
                <input type = "hidden" name = "lng" id = "lng" value = '' /> 
                  <input type = "submit" class = "btn" name = "submitted" value = "Save My Location" />
                </div>
            </form>
        </div>
</body>
</html>